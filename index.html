<html>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="jquery.js"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>
<script src="datamaps.world.min.js"></script>
<!--<script src="data.js"></script> -->

<div id="container" style="position: relative; width: 100%; height: 100%;"></div>
<script>
    var map = new Datamap({element: document.getElementById('container')});
    $(document).ready(function() {
	    $.get('imports.csv', function(data) {
	   		processData(data);
	    }, 'text');
});



    function processData(allText) {
	    //var record_num = 22;  // or however many elements there are in each row
	    var all = allText.split(/\r\n|\n/);
	    var headings = all[0].split(',');
	    var lines = [];
	    for(var i = 1; i < 5; i++) {
	    	var entry = all[i].split(",");
	        for (var j = 0; j < headings.length; j++) {
	        	lines[headings[j]] = entry[j];
	       		console.log(headings[j]);
	        }
	    }
	    // alert(lines);
	    console.log(lines.length);
	    return lines;
	}



</script>
</html>